---
order: 5
---

# Реферальная система

## Общая концепция

Реферальная система в _World Domination_ предназначена для привлечения новых игроков через механику приглашений. Пользователям предоставляется возможность делиться приглашениями и получать бонусы за активность привлеченных участников. Система интегрируется с Telegram Mini Apps и использует Telegram ID для отслеживания связей между пригласившими и приглашенными.

## Основной функционал

### 1. Интерфейс приглашений

- **Кнопка «Пригласить»:**
  - Вызывает встроенный интерфейс Telegram для отправки сообщения контактам.
  - Сообщение содержит автоматически сгенерированную ссылку вида:  
    `https://t.me/WorldDominationBot?startapp=<TelegramID>`, где `<TelegramID>` — идентификатор приглашающего пользователя.
- **Кнопка «Скопировать ссылку приглашения»:**
  - Копирует уникальную реферальную ссылку в буфер обмена.
  - После нажатия отображается уведомление «Ссылка скопирована».

### 2. Список рефералов

- **Отображение рефералов:**
  - Список разделен на две категории:
    - **Активные рефералы:** пользователи, регулярно заходящие в игру (активность определяется как вход в течение последних двух недель).
    - **Неактивные рефералы:** пользователи, не заходившие в игру более двух недель.
  - Для каждого реферала указывается:
    - Никнейм (из профиля Telegram или заданный в игре).
    - Статус (активен/неактивен).
- **Формат:** Таблица или карточки с возможностью прокрутки при большом количестве записей.

### 3. Ваш реферер

- **Отображение пригласившего:**
  - Указывается никнейм пользователя, чья ссылка была использована при регистрации.
  - Если реферер отсутствует (например, игрок пришел без приглашения), отображается сообщение: «Реферер не указан».

### 4. Поле ввода кода пригласившего

- **Функционал:**
  - Доступно только для новых игроков (уровень ниже 3), у которых не был автоматически засчитан пригласивший.
  - Поле для ручного ввода Telegram ID или реферального кода (формат уточняется).
  - Кнопка «Подтвердить» для отправки введенного кода.
- **Ограничения:**
  - Возможность ввода доступна только до достижения 3-го уровня.
  - После подтверждения код нельзя изменить.

### 5. Система бонусов

- **Примечание:**
  - Механика начисления бонусов за приглашение и активность рефералов будет детализирована позже.
  - Предполагается использование игровой валюты (например, «Кредиты» или «Жетоны») или кейсов в качестве наград.

## Техническая реализация

- Система использует параметр `startapp` из Telegram Mini Apps для отслеживания приглашений. Пример ссылки:  
  `https://t.me/WorldDominationBot?startapp=944276139`, где `944276139` — Telegram ID приглашающего.
- Данные о рефералах и их активности сохраняются в базе данных (PostgreSQL) и обновляются сервером (NestJS).

## Итог

Реферальная система в MVP предоставляет базовые инструменты для приглашения новых игроков и отображения связей между пользователями. Интерфейс включает кнопки «Пригласить» и «Скопировать ссылку», список рефералов с разделением на активных и неактивных, информацию о реферере и поле для ввода кода. Дальнейшее развитие системы, включая бонусы, будет определено на основе обратной связи после запуска.
