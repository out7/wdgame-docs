---
order: 5
---

# Планирование задач

План разработки разделен на этапы, каждый из которых включает задачи для frontend, backend и общие цели. Завершенные задачи отмечены зачеркиванием (~~так~~). Ниже описаны текущие и будущие этапы.

## Этап 1 (Завершен)

### Frontend

- ~~Донастройка проекта~~
- ~~Страница заглушки внешнего открытия~~
- ~~Страница ошибок~~
- ~~Проработка логики загрузки приложения~~
- ~~Доработка JWT авторизации~~
- ~~Интеграция системы состояний Zustand~~
- ~~Динамическое отображение данных пользователя (ник, баланс)~~
- ~~Динамическое отображение флага в городе~~
- ~~Объединить токены авторизации в одну куку с использованием шифрования через библиотеку jose~~

### Backend

- ~~Добавлены индексы базы данных~~
- ~~Реализована ручка /user/profile~~
- ~~Swagger работает только для dev среды~~
- ~~Добавил поля created_at, updated_at, last_login для пользователей~~
- ~~Добавлен эндпоинт PATCH /user/profile через него возможно обновить username и language_code. Можно обновить как отдельно, так и вместе.~~
- ~~Интегрирован модуль TelegramBot~~
- ~~Добавлена поддержка i18n на уровне backend~~
- ~~локализация пользователя проверяется через базу данных (если пользователь был зарегистрирован в игре + в дальнейшем игрок сможет менять её в приложении), иначе берется локализация по умолчанию из телеграмма~~
- ~~Добавлена команда /start (текст, кнопки и изображение - временные, выводятся на разных языках)~~
- ~~Для генерации ID теперь используется nanoid(), чтобы у нас не было последовательностей и т.д. У всех будет разный ID (на данный момент 16 символов)~~
- ~~Добавлено поле referrer_id - сюда будет записан TG_ID пользователя который пригласил. И массив referrals - сюда будут попадать все TG_ID пользователей которые зарегистрировались по пригласительной ссылке. | Пока только поля в базе данных. Вернемся к этому функционалу на 2-3 этапе.~~
- ~~Проработаны таблицы для функционала Героев: Hero, PlayerHero, PlayerHand~~

## Этап 2 (В работе)

### Общее

- Загрузить остальные флаги
- Доработка страниц документации
- ~~Настройка ESLint/Prettier/Husky/LintStages~~

### Frontend

- Требуется донастройка приложения так, чтобы интерфейс был наложен через React поверх PhaserJS сцен. Для реализации и тестирования данного функционала. Нужно сделать некий компонент GameLayout вынести кнопку настроек, отображение ника и баланса в него (сейчас данные штуки добавляются через игровой движок - это плохо).
- По нажатию на кнопку настроек - открываем мини модальное окно в середине экрана, там реализовать:
	- Звук (вкл/выкл) (пока оставляем просто визуально чекер)
	- Язык (дропдаун с языками, пока два англ/рус)
	- Кнопка закрытия модалки
	- затемлять фон при открытии модалки
- При изменении языка, сразу должен переключаться. Как в самом реакте, так и язык на сцене PhaserJS. (При переключении языка - сохраняем в бд - уже готово)
- Сконфигурировать TMA фулл скрин мод (https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/3-x/components/viewport#fullscreen-mode)
- Разделить сторы на разные файлы (https://github.com/matthieu-locussol/taktix-app/blob/master/apps/client/src/store/GameStore.ts) Обязательно хранить _currentScene (уже есть) и _game (нужно доработать) объекты.
- Переключение между сценами. Например CityScene (основной город), далее жмем по Казарме BarrackScene (нужна ли тут вообще сцена PhaserJS если тут только интерфейс? если нет, то закрывать полностью экран React компонентом казарм).
- Проработать использование BackButton от TMA. Например кнопка должна появляться когда открыли Казарму, чтобы вернуться в главный город и т.д.
- Казармы бизнес логика (верстка + интеграция с backend)

- Структура проекта
	- storybook - нужен ли он? (скорее всего да, но позже)
	- tailwind - аналогично под вопросом

### Backend

- ~~Ручки для:~~
  - ~~Hero (общий список героев)~~
  - ~~PlayerHero (герои, которые есть у игрока)~~
  - ~~PlayerHand (карты в руке игрока)~~

## Этап 3

## Этап 4

## Этап 5

## Этап 6 (Релиз v0.1.0)

### Общее

- Sentry
- Мониторинг
- Дорожная карта
