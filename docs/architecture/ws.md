# WebSocket События
### `auth`

- **Событие:** `auth`
- **Тип:** запрос-ответ
- **Авторизация:** ❌ Нет
- **Входной DTO:** `WsAuthDto`
- **Ответ (успешный):** `WsAuthResponseDto`
- **Ошибки:**
  - `TOKEN_MISSING` — токен не передан
  - `TOKEN_INVALID` — токен недействителен
  - `TOKEN_EXPIRED` — токен просрочен

---
### `refresh_token`

- **Событие:** `refresh_token`
- **Тип:** запрос-ответ
- **Авторизация:** ✅ Да (доступно только после события `auth`)
- **Входной DTO:** `WsRefreshDto`
- **Ответ (успешный):** `WsAuthResponseDto`
- **Ошибки:**
  - `TOKEN_MISSING` — refresh токен не передан
  - `TOKEN_INVALID` — токен недействителен
  - `TOKEN_EXPIRED` — токен просрочен
  - `NOT_AUTHORIZED` — сокет не авторизован (не вызывался `auth`)

---
### `profile`

- **Событие:** `profile`
- **Тип:** запрос-ответ
- **Авторизация:** ✅ Да
- **Ответ (успешный):** `UserProfileResponseDto`
- **Ошибки:**
  - `PROFILE_NOT_FOUND` — профиль не найден

---
### `room_stats`

- **Событие:** `room_stats`
- **Тип:** push (только от сервера)
- **Авторизация:** ✅ Да
- **Входной DTO:** `—` (клиент ничего не отправляет)
- **Ответ (успешный):** `RoomStatsDto`
- **Ошибки:** `—` (сервер сам решает, когда отправлять, ошибок не предусмотрено)

---

### `update_profile`

- **Событие:** `update_profile`
- **Тип:** запрос-ответ
- **Авторизация:** ✅ Да
- **Входной DTO:** `UpdateProfileDto`
- **Ответ (успешный):** `UserProfileResponseDto` — обновлённое состояние профиля
- **Ошибки:**
  - `PROFILE_UPDATE_FAILED` — ошибка обновления данных
